# ============================================
# $Id: Makefile.in,v 1.20 2007/07/06 12:09:49 yannick Exp $
# ============================================
PACKAGE = @PACKAGE@
VERSION = @VERSION@
utildir=@PUBRULE@
appname = @PACKAGE@
pubdir = @prefix@
srcdir = @srcdir@
applib = FDL
rootprefix=$(RPM_BUILD_ROOT)
export pubdir utildir appname applib

TAR = gtar
GZIP_ENV = --best

export targetdir PACKAGE

SUBDIR=  Class Zone Action JavaScript Css JavaScript  App Api Share Images Doc debian

include $(utildir)/PubRule

DISTFILES = $(SUBDIR) \
            $(wildcard *.in) \
            VERSION RELEASE $(PACKAGE).vault $(PACKAGE).cron \
	    $(PACKAGE)_en.po $(PACKAGE)_fr.po 


$(pubdir)/$(applib) :
	mkdir -p $@

$(rootprefix)/var/freedom:
	mkdir -p $@

$(rootprefix)/etc/cron.d:
	mkdir -p $@

$(rootprefix)/etc/cron.d/$(PACKAGE).cron:$(PACKAGE).cron $(rootprefix)/etc/cron.d
	cp $(PACKAGE).cron $@

$(pubdir)/$(applib)/FREEDOM.vault : FREEDOM.vault
	cp $< $(pubdir)/$(applib)/$<
publish: $(pubdir)/$(applib)  $(pubdir)/$(applib)/FREEDOM.vault $(rootprefix)/etc/cron.d/$(PACKAGE).cron $(rootprefix)/var/freedom

clean:
	rm -f *.*~ config.* Makefile configure $(PACKAGE).spec \
              $(PACKAGE)-$(VERSION).tar.gz \
              App/Freedom/FREEDOM_init.php \
              App/Freedom/FREEDOM_post \
              App/Fdl/FDL_init.php \
              App/Fdl/FDL_post \
	      App/Usercard/USERCARD_post \
              App/Generic/GENERIC_init.php App/Usercard/USERCARD_init.php \
	      App/Fusers/FUSERS_init.php App/Onefam/ONEFAM_init.php
