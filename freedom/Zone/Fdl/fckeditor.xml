<script type="text/javascript">

function trackKeysQuickSave(event) {
  var intKeyCode,ctrlKey;

  if (!event) event=window.event;
 
  intKeyCode = event.which;
  if (!intKeyCode) intKeyCode= event.keyCode;
  //alert(intKeyCode);
  ctrlKey = event.ctrlKey;
  if (((intKeyCode == 115)||(intKeyCode == 83)) && ( ctrlKey)) {
    // Ctrl-S
    if (quicksave) quicksave();
    else if (window.parent.quicksave) window.parent.quicksave();
    
    //  window.parent.quicksave();  
    if (stopPropagation) stopPropagation(event);
    else if (window.parent.stopPropagation) window.parent.stopPropagation(event);    
  } else {
    document.isChanged=true;
  }
}

var oFCKeditor[aid] = new FCKeditor( '_[aid]' ) ;

oFCKeditor[aid].BasePath = 'fckeditor/';
oFCKeditor[aid].Config['FullPage'] = false ;
oFCKeditor[aid].Config['SkinPath'] =  'skins/silver/';
oFCKeditor[aid].Config['ToolbarStartExpanded'] =  [toolbarexpand];


//oFCKeditor[aid].Config['FontNames'] =  'serif;sans-serif;cursive;fantasy;monospace' ;
oFCKeditor[aid].ToolbarSet = '[toolbar]';
oFCKeditor[aid].Config["CustomConfigurationsPath"] = "../../FDL/Layout/fdl_fckeditor.js"  ;
oFCKeditor[aid].Height='[height]';
oFCKeditor[aid].Value='[Value]';

oFCKeditor[aid].Create();
NB_FCKEDITORS++;
function trackQS_[aid]() {
  var oEditor = FCKeditorAPI.GetInstance('_[aid]') ;

  if (oEditor.EditorDocument) {   
    addEvent(oEditor.EditorDocument,"keydown",trackKeysQuickSave);  
    if (isNetscape) addEvent(oEditor.EditorDocument,"mouseover",fckforceedit_[aid]);    
  } else window.setTimeout( trackQS_[aid], 1000 ) ;
}

function fckforceedit_[aid]() {
  var oEditor = FCKeditorAPI.GetInstance('_[aid]') ;

  if (oEditor.EditorDocument) {
    if (  oEditor.EditMode == FCK_EDITMODE_WYSIWYG ){
      oEditor.MakeEditable();
    }
  } 
}
function wstop_[aid]() { 
  var oEditor = FCKeditorAPI.GetInstance('_[aid]') ;

  if (oEditor.EditorDocument) {
    //    alert('_[aid]');
    NB_FCKEDITORS_INIT--;
    if (NB_FCKEDITORS_INIT<=0) window.stop();
  } else {
    window.setTimeout( wstop_[aid], 1000 ) ;
  }
  
 }
addEvent(window,"load",trackQS_[aid]);
if (isNetscape) window.setTimeout( wstop_[aid], 3000 ) ;

</script>
