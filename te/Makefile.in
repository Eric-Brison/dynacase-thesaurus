# ============================================
# $Id: Makefile.in,v 1.11 2008/03/17 10:03:13 eric Exp $
# ============================================
PACKAGE = @PACKAGE@
VERSION = @VERSION@
utildir=@PUBRULE@
appname = @PACKAGE@
pubdir = @prefix@
srcdir = @srcdir@
rcdir = @rcinit@

rootprefix=$(RPM_BUILD_ROOT)

export pubdir utildir appname

TAR = gtar
GZIP_ENV = --best

export targetdir PACKAGE

SUBDIR=  Class Engines debian

include $(utildir)/PubRule

DISTFILES += $(SUBDIR)  ted.fc ted.pld $(PACKAGE).cron te.conf te_clean \
            RELEASE VERSION

$(rootprefix)/etc/cron.d/$(PACKAGE).cron:$(PACKAGE).cron 
	install -D -p -m 0755 $(PACKAGE).cron $@

$(rootprefix)/etc/te.conf:te.conf 
	install -D -p -m 0644 te.conf $@

$(rootprefix)$(rcdir)/ted: ted 
	install -D -p -m 0755 ted $@

$(pubdir)/$(appname)/te_request_server: te_request_server.php
	install -D -p -m 0755 te_request_server.php $@
$(pubdir)/$(appname)/te_rendering_server: te_rendering_server.php
	install -D -p -m 0755 te_rendering_server.php $@
$(pubdir)/$(appname)/te_server_init: te_server_init.php
	install -D -p -m 0755 te_server_init.php $@
$(pubdir)/$(appname)/te_clean: te_clean
	install -D -p -m 0755 $< $@

publish: $(rootprefix)/etc/cron.d/$(PACKAGE).cron $(rootprefix)$(rcdir)/ted $(pubdir)/$(appname)/te_request_server $(pubdir)/$(appname)/te_rendering_server $(pubdir)/$(appname)/te_server_init $(rootprefix)/etc/te.conf $(pubdir)/$(appname)/te_clean
