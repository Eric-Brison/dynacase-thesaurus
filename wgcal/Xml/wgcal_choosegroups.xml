[ZONE WGCAL:WGCAL_HTMLHEAD?RZ=HV]
<form id="setgroups" target="wgcal_hidden" method="POST" action="[CORE_STANDURL]&app=WGCAL&action=WGCAL_SETGROUPS">
<input type="hidden" value="-1" id="groups" name="groups">
</form>

<script type="text/javascript">
var grpChanged = false;
var glist = new Array();
[BLOCK GLIST]
glist[[igroup]] = [gfid];[ENDBLOCK GLIST]

function changeGrp(grp) 
{
  var cGrp = document.getElementById('d'+grp);
  if (!cGrp) return;
  if (cGrp.className!='WGCRessSelected') {
    glist[glist.length] = grp;
    cGrp.className = 'WGCRessSelected';
  } else {
    for (i=0; i<glist.length;i++) {
      if (glist[i] == grp) glist[i] = -1;
    }
    cGrp.className = 'WGCRessDefault';
  }
  grpChanged = true;
  return false;
}

function saveGrp() 
{
  var grpList = '';
  for (i=0; i<glist.length;i++) {
    if (glist[i] != -1) {
      grpList += glist[i]+'|';
    }
  }
  document.getElementById('groups').value = grpList;
  document.getElementById('setgroups').submit();
  grpChanged = false;
  return false;
}

function checkGrp()
{
  if (grpChanged) {
    if (confirm('[TEXT:groups are changed, save the list ?]')) {
      saveGrp();
    }
  }
}

</script>
<div class="wMonthTextTitle" align="left">[TEXT:agenda groups selection]</div>

<div style="margin:20px; border:1px outset white">[BLOCK groups]
<div id="d[gfid]" style="margin:2px" class="[IF gisused]WGCRessSelected[ENDIF gisused][IFNOT gisused]WGCRessDefault[ENDIF gisused]"
onmouseover="if (this.className!='WGCRessSelected') this.className='WGCRessOver'" 
onmouseout="if (this.className!='WGCRessSelected') this.className='WGCRessDefault'"  
title="[TEXT:click to add/remove group] [gtitle]"
onclick="changeGrp([gfid])">&nbsp;&nbsp;<img src="[gicon]"  border="0" height="15px">&nbsp;&nbsp;[gtitle]</div>[ENDBLOCK groups]
</div>

<table cellspacing="0" cellpadding="0" width="100%"><tr><td class="wMonthTextTitle"  align="right">
<img src="[IMG:wm-save.gif]" id="btnApply" height="12px" title="[TEXT:save]" class="WGCalAction" onclick="saveGrp();">
<img src="[IMG:wm-close.gif]" id="btnCancel" height="12px" title="[TEXT:cancel]" class="WGCalAction" onclick="checkGrp(); window.close();"></td></tr></table>

[ZONE WGCAL:WGCAL_HTMLFOOT]
