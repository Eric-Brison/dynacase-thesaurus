# ============================================
# $id: Makefile.in,v 1.14 2002/01/04 16:04:35 eric Exp $
# ============================================
PACKAGE = @PACKAGE@
VERSION = @VERSION@
utildir=@PUBRULE@
appname = @PACKAGE@
pubdir = @prefix@
srcdir = @srcdir@
rootprefix=$(RPM_BUILD_ROOT)


export pubdir utildir appname pidir

TAR = gtar
GZIP_ENV = --best



export targetdir
export utildir

SUBDIR= Expire Class Action Zone Share App Api Images Style Doc

TOP_MODULES = index.php wsh.php wvirtual.php wchoose.php guest.php dbaccess.php apache.conf  whattext wcheck wstop wstart wdbcreate winitrc apachev.conf.in apachevi.conf.in httpd.pam.in httpdwa.pam.in


include $(utildir)/PubRule

DISTFILES += $(SUBDIR)  \
             ChangeLog  VERSION RELEASE WHAT.cron \
	     whattext wcheck wstop wstart wdbcreate winitrc httpd.pam httpdwa.pam 



$(pubdir)/whattext: whattext
	cp $< $@
$(pubdir)/wcheck: wcheck
	cp $< $@
$(pubdir)/wdbcreate: wdbcreate
	cp $< $@
$(pubdir)/winitrc: winitrc
	cp $< $@
$(pubdir)/wstop: wstop
	cp $< $@
$(pubdir)/wstart: wstart
	cp $< $@
$(pubdir)/httpd.pam.in: httpd.pam.in
	cp $< $@
$(pubdir)/httpdwa.pam.in: httpdwa.pam.in
	cp $< $@
$(pubdir)/apachev.conf.in: apachev.conf.in
	cp $< $@
$(pubdir)/apachevi.conf.in: apachevi.conf.in
	cp $< $@



$(rootprefix)/etc/pam.d:
	mkdir -p $@
$(rootprefix)/etc/pam.d/httpd: $(rootprefix)/etc/pam.d
	cp httpd.pam $@
$(rootprefix)/etc/pam.d/httpdwa: $(rootprefix)/etc/pam.d
	cp httpdwa.pam $@

$(rootprefix)/etc/cron.daily:
	mkdir -p $@

$(rootprefix)/etc/cron.daily/WHAT.cron:WHAT.cron $(rootprefix)/etc/cron.daily
	cp WHAT.cron $@

publish: $(rootprefix)/etc/pam.d/httpd $(rootprefix)/etc/pam.d/httpdwa $(rootprefix)/etc/cron.daily/WHAT.cron

clean:
	rm -f *.*~ config.* Makefile configure $(PACKAGE).spec \
	      $(PACKAGE)-Fedora.spec $(PACKAGE)-$(VERSION).tar.gz \
	      dbaccess.php apache.conf App/Core/CORE_init.php \
	      App/Users/USERS_init.php App/Access/ACCESS_init.php \
	      App/Authent/AUTHENT_init.php App/Appmng/APPMNG_init.php \
	      httpd.pam
