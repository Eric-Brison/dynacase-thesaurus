#   Autoconf script for libphp
#
#   Copyright 2000 Yannick Le Briquer <yannick.lebriquer@anakeen.com>
#
#   This program is free software; you can redistribute it and/or
#   modify it under the terms of the GNU General Public License
#   as published by the Free Software Foundation; either version
#   2 of the License, or (at your option) any later version.
#
AC_REVISION($Id: configure.in,v 1.15 2007/06/26 20:14:03 yannick Exp $)
dnl
dnl Process this file with autoconf to produce a configure script.
dnl
AC_PREREQ(2.13)
AC_INIT(./index.php)
AC_SUBST(VERSION)
VERSION=`cat VERSION`
AC_SUBST(RELEASE)
RELEASE=`cat RELEASE`
AC_SUBST(PACKAGE)
PACKAGE=WHAT

ac_default_prefix=/usr/share/what

AC_SUBST(PUBRULE)
PUBRULE=$HOME/anakeen/what
AC_ARG_WITH(pubrule,
[  --with-pubrule=dir	Path to PubRule], PUBRULE=$withval)

AC_SUBST(LOGLEVEL)
LOGLEVEL=IWEF
AC_ARG_WITH(log-level,
[  --with-log-level=log-level   Set Log Level], LOGLEVEL=$withval)

AC_SUBST(LANG)
LANG=fr_FR
AC_ARG_WITH(lang,
[  --with-lang=lang   Set Lang ], LANG=$withval)


AC_SUBST(DBSERV)
DBSERV=
AC_ARG_WITH(dbserv,
[  --with-dbserv=virutal host (default empty)  ], DBSERV=$withval)

AC_SUBST(DBHOST)
DBHOST=localhost
AC_ARG_WITH(dbhost,
[  --with-dbhost=host the PostgreSql Host (default localhost)  ], DBHOST=$withval)

AC_SUBST(DBENV)
DBENV=anakeen
AC_ARG_WITH(dbenv,
[  --with-dbenv=name  the database environnement (default anakeen)], DBENV=$withval)

AC_SUBST(DBNAME)
DBNAME=anakeen
AC_ARG_WITH(dbname,
[  --with-dbname=name  the core database name (default anakeen)], DBNAME=$withval)

AC_SUBST(DBFREEDOM)
DBFREEDOM=freedom
AC_ARG_WITH(dbfreedom,
[  --with-dbfreedom=name  the freedom database name (default freedom)], DBFREEDOM=$withval)

AC_SUBST(DBUSER)
DBUSER=anakeen
AC_ARG_WITH(dbuser,
[  --with-dbuser=username  the database user (default anakeen)], DBUSER=$withval)

AC_SUBST(DBPATH)
DBPATH=anakeen
AC_ARG_WITH(dbuser,
[  --with-dbpath=passwd  the database passwd (default anakeen)], DBPATH=$withval)

AC_SUBST(DBPORT)
DBPORT=5432
AC_ARG_WITH(dbport,
[  --with-dbport=port number  the database port (default 5432)], DBPORT=$withval)

AC_SUBST(APACHECONFDIR)
APACHECONFDIR=/etc/httpd/httpd.conf
AC_ARG_WITH(apacheconfdir,
[  --with-apacheconfdir=apache config dir (default /etc/httpd/httpd.conf)], APACHECONFDIR=$withval)

AC_SUBST(HTTPUSER)
HTTPUSER=http
AC_ARG_WITH(httpuser,
[  --with-httpuser=user id for httpd process (default http)], HTTPUSER=$withval)

AC_OUTPUT(Makefile  dbaccess.php dbaccess.sh WHAT.spec apache.conf freedom.conf \
          App/Core/CORE_init.php \
          App/Users/USERS_init.php \
          App/Access/ACCESS_init.php \
          App/Authent/AUTHENT_init.php \
          App/Appmng/APPMNG_init.php httpdwa.pam\
          Api/appadmin.php Api/updateclass.php \
          Share/Lib.Prefix.php  \
	  httpd.pam debian/changelog.in  )
